"use strict";function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var utils=function(){var t={root:$("#modal"),dialog:$("#modal-dialog"),title:$("#modal-title"),btn:"",closeBtn:$("#modal-title + .close"),body:$("#modal-body"),footer:$("#modal-footer"),data:{},action:function(){},show:function(){},shown:function(){},hidden:function(){},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'<i class="fas fa-sync fa-spin mr-2"></i>Memproses...',n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!1===e?($("#modal-btn").html(t.btn).prop("disabled",!1),$('[data-dismiss="modal"]').prop("disabled",!1)):($("#modal-btn").html(e).prop("disabled",!0),$('[data-dismiss="modal"]').prop("disabled",!0),n&&t.error(!1))},error:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!1===e?$("#modal-error").hide():($("#modal-error").html('<div class="px-3 py-2"><i class="fas fa-exclamation-triangle mr-2"></i>'.concat(e,"</div>")).slideDown(),n&&t.loading(!1))}},e=function(e){var n=e.title,o=void 0===n?"":n,a=e.body,i=e.btnLabel,r=void 0===i?"Ok":i,l=e.btnClass,s=void 0===l?"btn-primary":l,d=e.btnDisabled,c=void 0!==d&&d,f=e.btnCloseLabel,u=void 0===f?"Batal":f,p=e.btnCloseClass,m=void 0===p?"btn-default":p,g=e.data,b=void 0===g?{}:g,h=e.dialogClass,v=void 0===h?"":h,y=e.backdrop,$=void 0===y||y,w=e.action,k=void 0===w?null:w,_=e.show,M=void 0===_?null:_,D=e.shown,O=void 0===D?null:D,j=e.hidden,x=void 0===j?null:j;t.data=b,t.btn=r,t.action="function"==typeof k?k:function(){},t.show="function"==typeof M?M:function(){},t.shown="function"==typeof O?O:function(){},t.hidden="function"==typeof x?x:function(){};var Y='data-dismiss="modal"';return"string"==typeof k?Y='onclick="'.concat(k,'"'):"function"==typeof k&&(Y='onclick="utils.doModalAction()"'),t.dialog.attr("class","modal-dialog").addClass(v),t.title.html(o),t.body.html(a),t.footer.html('\n\t\t\t<button type="button" class="btn '.concat(m,'" data-dismiss="modal">').concat(u,'</button>\n\t\t\t<button type="button" id="modal-btn" ').concat(Y,' class="btn ').concat(s,'" ').concat(c?"disabled":"",">").concat(r,"</button>\n\t\t")),t.root.data("bs.modal")._config.backdrop=$,t.error(),t.root.modal("show").trigger("show.bs.modal")};t.root.modal("hide").on("show.bs.modal",function(e){t.closeBtn.prop("disabled",!1),$('[data-toggle="tooltip"]').tooltip("hide"),$.fn.selectpicker&&t.root.find(".selectpicker").selectpicker("render"),$.fn.scrollbar&&t.root.find(".scrollbar-outer").scrollbar(),t.show()}).on("shown.bs.modal",function(e){t.shown()}).on("hidden.bs.modal",function(e){t.hidden()});var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;n&&$.notifyClose();var i="icon-info";"wait"===e&&(i="icon-hourglass",e="info"),"success"===e&&(i="icon-check"),"danger"!==e&&"warning"!==e||(i="icon-exclamation"),$.notify(_objectSpread({message:t,icon:i},a),_objectSpread({type:e},o))},o=function(t){return t.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")};return{modal:e,getModalData:function(){return t.data},doModalAction:function(){return t.action()},modalLoading:t.loading,modalError:t.error,notif:n,getSlug:o}}(),dbg=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"!",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"undefined"!=typeof DEV&&DEV&&console.info("%c"+t,"color: ".concat("number"==typeof e?["#00ff7f","#6495ed","#ff0","#fa8072","#ffa500","#f00"][e]:e))};$(function(){console.log("Â© Muhammad Afifudin, 2020"),console.log("%cVersion: "+$('script[src*="assets/js"]').prop("src").split("?v=")[1],"color: #6495ed"),$("body").tooltip({selector:'[data-toggle="tooltip"]',html:!0})}),$.notifyDefaults({placement:{from:"bottom"},animate:{enter:"animated fadeInUp",exit:"animated fadeOutDown"}}),$.extend(!0,$.fn.dataTable.defaults,{dom:"<'row justify-content-center'<'col-sm-auto'l><'col-sm'f>>r<'table-responsive't><'row justify-content-center align-items-center'<'col-sm-auto'i><'col-sm'p>>",language:{decimal:",",thousands:".",lengthMenu:"Menampilkan &nbsp;_MENU_&nbsp; data",search:"Cari",info:"Halaman _PAGE_ dari _PAGES_",infoFiltered:"",infoEmpty:"Menampilkan 0 hasil",paginate:{previous:'<i class="fas fa-chevron-left"></i>',next:'<i class="fas fa-chevron-right"></i>'},zeroRecords:"Tidak ada hasil",emptyTable:"Tidak ada data"},pageLength:50,lengthMenu:[10,25,50,100,250,500]}),$(function(){var t,e={sectionInput:$("#section-input"),sectionResult:$("#section-result"),dropzone:$("#dropzone"),timezone:$("#timezone"),display:$('[name="display_setting"]'),tbl:$("#table")},n=7,o=0;e.dropzone.on("click",function(t){$("#input-files").trigger("click")}).on("drag dragstart dragend dragover dragenter dragleave drop",function(t){t.preventDefault(),t.stopPropagation()}).on("dragover dragenter",function(){e.dropzone.addClass("dragover")}).on("dragleave dragend drop",function(){e.dropzone.removeClass("dragover")}).on("drop",function(t){a(t.originalEvent.dataTransfer.files)}),e.display.change(function(){o=Number($(this).val()),e.tbl.toggleClass("td3-d-none td6-d-none",0===o).toggleClass("td4-d-none td5-d-none",1===o),t.draw()}),$("#input-files").change(function(t){a(t.target.files)}),$("#btn-reset").click(function(){$(".tooltip").tooltip("hide"),e.sectionResult.hide(),e.sectionInput.fadeIn()});var a=function(t){var e=0,n=t.length,o=0,a=0,r=0,l=[],s=function(){n===e&&(o&&(utils.notif(o+" file berhasil diproses","success"),i(l)),a&&utils.notif((o?a+" file":"File")+" tidak valid","danger"),r&&utils.notif(r+" file gagal terbaca","warning"))};Array.from(t).forEach(function(t){if("csv"===t.name.substr(t.name.lastIndexOf(".")+1).toLowerCase()){var n=new FileReader;n.readAsText(t),n.onload=function(n){var i=n.target.result.replace(/\t/g,",");i.replace(/\"/g,"").startsWith("Responder Name,Group Name,Responder Location Latitude,Responder Location Longitude")?(l.push({filename:t.name,data:$.csv.toObjects(i.replace(/\,\=\"20/g,',"20'))}),e++,o++,s()):(e++,a++,s())},n.onerror=function(){e++,r++,s()}}else e++,a++}),s()},i=function(o){console.info(o);var a=function(t,e){return'<span class="text-'.concat(e<=73e3||e>=("4"===t.format("e")?163e3:16e4)?"green":"danger",'">').concat(t.format("HH:mm:ss"),"</span>")};e.timezone.html($("#select-timezone :selected").text()),n=Number($("#select-timezone").val());var i=[],r=[],l=[];o.forEach(function(t){t.data.forEach(function(t){var e=moment(t["ResponseTime (UTC)"].substr(0,19)).add(n,"hours"),o=e.format("D MMMM YYYY"),s=Number(e.format("HHmmss"));r.includes(t["Responder Name"])||r.push(t["Responder Name"]),l.includes(o)||l.push(o);var d=r.findIndex(function(e){return e===t["Responder Name"]})+1,c=d+e.format("-YYYYMMDD"),f=d+e.format("-YYYYMMDD-HHmmss");i.push(_objectSpread({},t,{t:a(e,s),d:e.format('[<span class="d-none">]YYYYMMDD[</span>]dddd, D MMMM YYYY'),hourInNum:s,id_employee:d,id_employee_d:c,id_employee_t:f}))})}),i.forEach(function(t){var e=i.filter(function(e){return e.id_employee_d===t.id_employee_d}).map(function(t){return t.t}),n=e.length;0===e.findIndex(function(e){return e===t.t})&&(t.range=1===n?t.hourInNum<12e4?[t.t,'<span class="text-gray">-</span>']:['<span class="text-gray">-</span>',t.t]:[t.t,e[n-1]])}),t.clear().rows.add(i).draw(),e.tblFilter.html('<option value="">Semua Pegawai</option><option style="border-bottom: 1px solid #eee; font-size: 0; padding: 6px 0 0; margin-bottom: 6px;" disabled></option>'+r.map(function(t,e){return[t,'<option value="'.concat(e+1,'">').concat(t,"</option>")]}).sort(function(t,e){return t[0]>e[0]?1:-1}).map(function(t){return t[1]}).join("")).trigger("change").selectpicker("refresh"),$("#display_setting1").click(),e.sectionInput.hide(),e.sectionResult.fadeIn()};t=e.tbl.DataTable({data:[],columns:[{className:"fit",title:"Hari, Tanggal",data:"d"},{title:"Nama",data:null,render:function(t){return'<span class="d-none">[id='.concat(t.id_employee,"]</span>").concat(t["Responder Name"])}},{title:"Waktu",data:"t"},{title:"Waktu Mulai",data:null,render:function(t){var e=t.range;return e?e[0]:""}},{title:"Waktu Berakhir",data:null,render:function(t){var e=t.range;return e?e[1]:""}},{title:"Catatan",data:"NotesQuestionTitle"},{className:"fit pr-2",title:"",data:null,searchable:!1,sortable:!1,render:function(){return'<i class="fas fa-info-circle fa-fw py-1 cur-p fz-16 text-primary" title="Detail" onclick="utils.notif(\'Coming soon...\', \'wait\')"></i>'}}]}),$("#table_filter").html('<div class="d-inline-flex align-items-center"><div class="mr-2"><i class="fas fa-user"></i></div><div><select id="table-filter-employee" class="selectpicker" data-style="btn-light btn-sm"></select></div></div>'),e.tblFilter=$("#table-filter-employee").change(function(){t.draw()}),$.fn.dataTable.ext.search.push(function(t,n,a){return(!e.tblFilter.val()||n[1].includes("[id=".concat(e.tblFilter.val(),"]")))&&(o||n[3])}),$("#btn-export").click(function(){utils.notif("Coming soon...","wait")})});
//# sourceMappingURL=main.js.map
