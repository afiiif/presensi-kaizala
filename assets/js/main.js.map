{"version":3,"sources":["utilities.js","libraries.js","main.js"],"names":["utils","$modal","root","$","dialog","title","btn","closeBtn","body","footer","data","action","show","shown","hidden","loading","a","arguments","length","undefined","unsetError","html","prop","error","unsetLoadingState","hide","concat","slideDown","modal","_ref","_ref$title","_ref$btnLabel","btnLabel","_ref$btnClass","btnClass","_ref$btnDisabled","btnDisabled","_ref$btnCloseLabel","btnCloseLabel","_ref$btnCloseClass","btnCloseClass","_ref$data","_ref$dialogClass","dialogClass","_ref$backdrop","backdrop","_ref$action","_ref$show","_ref$shown","_ref$hidden","onclick","attr","addClass","_config","trigger","on","e","tooltip","fn","selectpicker","find","scrollbar","notif","message","type","close","settings","options","notifyClose","icon","notify","_objectSpread","getSlug","text","toLowerCase","replace","getModalData","doModalAction","modalLoading","modalError","dbg","c","DEV","console","info","log","split","selector","notifyDefaults","placement","from","animate","enter","exit","extend","dataTable","defaults","dom","language","decimal","thousands","lengthMenu","search","infoFiltered","infoEmpty","paginate","previous","next","zeroRecords","emptyTable","pageLength","document","preventDefault","this","ekkoLightbox","$el","sectionInput","sectionResult","dropzone","removeClass","readFile","originalEvent","dataTransfer","files","tbl","toggleClass","display","change","target","fadeIn","i","n","nValid","nInvalid","nFailed","checkIfDone","generateResult","Array","forEach","file","name","substr","lastIndexOf","reader","FileReader","readAsText","onload","result","startsWith","push","filename","csv","toObjects","colorTime","m","format","merged","employees","day","time","Number","includes","b","id_employee","findIndex","id_employee_d","id_employee_t","dt_day","dt_time","allTime","range_time","range_coordinate","range_note","NotesQuestionTitle","range_photo","PhotoQuestionTitle","dt_range_time","$tbl","clear","rows","add","draw","render","_ref3","timezone","exportExcel","sheets","wb","XLSX","book_new","book_append_sheet","aoa_to_sheet","writeFile","moment","utc","click","header","dataByEmployee","rawdata","map","filter"],"mappings":"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","file":"main.js","sourcesContent":["const utils = (function() {\r\n\r\n\tlet $modal = {\r\n\t\troot: $('#modal'),\r\n\t\tdialog: $('#modal-dialog'),\r\n\t\ttitle: $('#modal-title'),\r\n\t\tbtn: '',\r\n\t\tcloseBtn: $('#modal-title + .close'),\r\n\t\tbody: $('#modal-body'),\r\n\t\tfooter: $('#modal-footer'),\r\n\t\tdata: {},\r\n\t\taction: () => {},\r\n\t\tshow: () => {},\r\n\t\tshown: () => {},\r\n\t\thidden: () => {},\r\n\t\tloading: (a='<i class=\"fas fa-sync fa-spin mr-2\"></i>Memproses...', unsetError=true) => {\r\n\t\t\tif (a === false) {\r\n\t\t\t\t$('#modal-btn').html($modal.btn).prop('disabled', false);\r\n\t\t\t\t$('[data-dismiss=\"modal\"]').prop('disabled', false);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$('#modal-btn').html(a).prop('disabled', true);\r\n\t\t\t\t$('[data-dismiss=\"modal\"]').prop('disabled', true);\r\n\t\t\t\tif (unsetError) $modal.error(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: (a=false, unsetLoadingState=true) => {\r\n\t\t\tif (a === false) $('#modal-error').hide();\r\n\t\t\telse {\r\n\t\t\t\t$('#modal-error').html(`<div class=\"px-3 py-2\"><i class=\"fas fa-exclamation-triangle mr-2\"></i>${a}</div>`).slideDown();\r\n\t\t\t\tif (unsetLoadingState) $modal.loading(false);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\tconst modal = ({ title='', body, btnLabel='Ok', btnClass='btn-primary', btnDisabled=false, btnCloseLabel='Batal', btnCloseClass='btn-default', data={}, dialogClass='', backdrop=true, action=null, show=null, shown=null, hidden=null }) => {\r\n\r\n\t\t$modal.data = data;\r\n\t\t$modal.btn = btnLabel;\r\n\t\t$modal.action = typeof action === 'function' ? action : (() => {});\r\n\t\t$modal.show = typeof show === 'function' ? show : (() => {});\r\n\t\t$modal.shown = typeof shown === 'function' ? shown : (() => {});\r\n\t\t$modal.hidden = typeof hidden === 'function' ? hidden : (() => {});\r\n\r\n\t\tlet onclick = 'data-dismiss=\"modal\"';\r\n\t\tif (typeof action === 'string') onclick = `onclick=\"${action}\"`;\r\n\t\telse if (typeof action === 'function') onclick = 'onclick=\"utils.doModalAction()\"';\r\n\r\n\t\t$modal.dialog.attr('class', 'modal-dialog').addClass(dialogClass);\r\n\t\t$modal.title.html(title);\r\n\t\t$modal.body.html(body);\r\n\t\t$modal.footer.html(`\r\n\t\t\t<button type=\"button\" class=\"btn ${btnCloseClass}\" data-dismiss=\"modal\">${btnCloseLabel}</button>\r\n\t\t\t<button type=\"button\" id=\"modal-btn\" ${onclick} class=\"btn ${btnClass}\" ${btnDisabled ? 'disabled' : ''}>${btnLabel}</button>\r\n\t\t`);\r\n\r\n\t\t$modal.root.data('bs.modal')._config.backdrop = backdrop;\r\n\r\n\t\t$modal.error();\r\n\r\n\t\treturn $modal.root.modal('show').trigger('show.bs.modal');\r\n\t};\r\n\r\n\t$modal.root\r\n\t.modal('hide')\r\n\t.on('show.bs.modal', e => {\r\n\t\t$modal.closeBtn.prop('disabled', false);\r\n\t\t$('[data-toggle=\"tooltip\"]').tooltip('hide');\r\n\t\tif ($.fn.selectpicker) $modal.root.find('.selectpicker').selectpicker('render');\r\n\t\tif ($.fn.scrollbar) $modal.root.find('.scrollbar-outer').scrollbar();\r\n\t\t$modal.show();\r\n\t})\r\n\t.on('shown.bs.modal', e => {\r\n\t\t$modal.shown();\r\n\t})\r\n\t.on('hidden.bs.modal', e => {\r\n\t\t$modal.hidden();\r\n\t});\r\n\r\n\tconst notif = (message, type='info', close=false, settings, options) => {\r\n\t\tif (close) $.notifyClose();\r\n\t\tlet icon = 'icon-info';\r\n\t\tif (type === 'wait') { icon = 'icon-hourglass'; type = 'info'; }\r\n\t\tif (type === 'success') { icon = 'icon-check'; }\r\n\t\tif (type === 'danger' || type === 'warning') { icon = 'icon-exclamation'; }\r\n\t\t$.notify({ message, icon, ...options }, { type, ...settings });\r\n\t}\r\n\r\n\tconst getSlug = text=> text.toLowerCase().replace(/[^\\w ]+/g,'').replace(/ +/g,'-');\r\n\r\n\treturn {\r\n\t\tmodal,\r\n\t\tgetModalData: () => $modal.data,\r\n\t\tdoModalAction: () => $modal.action(),\r\n\t\tmodalLoading: $modal.loading,\r\n\t\tmodalError: $modal.error,\r\n\t\tnotif,\r\n\t\tgetSlug,\r\n\t}\r\n\r\n})();\r\n\r\n\r\n\r\nconst dbg = (a='!', c=0) => {\r\n\tif (typeof DEV !== 'undefined') {\r\n\t\tif (DEV) console.info('%c'+a, `color: ${typeof c==='number'? ['#00ff7f', '#6495ed', '#ff0', '#fa8072', '#ffa500', '#f00'][c] : c}`);\r\n\t}\r\n}\r\n\r\n\r\n\r\n$(()=>{\r\n\r\n\tconsole.log('Â© Muhammad Afifudin, 2020');\r\n\tconsole.log('%cVersion: '+$('script[src*=\"assets/js\"]').prop('src').split('?v=')[1], 'color: #6495ed');\r\n\r\n\t$('body').tooltip({ selector: '[data-toggle=\"tooltip\"]', html: true });\r\n\r\n});\r\n","$.notifyDefaults({\r\n\tplacement: { from: 'bottom' },\r\n\tanimate: { enter: 'animated fadeInUp', exit: 'animated fadeOutDown' },\r\n});\r\n\r\n$.extend(true, $.fn.dataTable.defaults, {\r\n\tdom: \"<'row justify-content-center'<'col-sm-auto'l><'col-sm'f>>r<'table-responsive't><'row justify-content-center align-items-center'<'col-sm-auto'i><'col-sm'p>>\",\r\n\tlanguage: {\r\n\t\tdecimal: ',',\r\n\t\tthousands: '.',\r\n\t\tlengthMenu: 'Menampilkan &nbsp;_MENU_&nbsp; data',\r\n\t\tsearch: 'Cari',\r\n\t\tinfo: 'Halaman _PAGE_ dari _PAGES_',\r\n\t\tinfoFiltered: '',\r\n\t\tinfoEmpty: 'Menampilkan 0 hasil',\r\n\t\tpaginate: { previous: '<i class=\"fas fa-chevron-left\"></i>', next: '<i class=\"fas fa-chevron-right\"></i>' },\r\n\t\tzeroRecords: 'Tidak ada hasil',\r\n\t\temptyTable: 'Tidak ada data',\r\n\t},\r\n\tpageLength: 50,\r\n\tlengthMenu: [10, 25, 50, 100, 250, 500],\r\n});\r\n","$(()=>{\r\n\r\n\t$(document).on('click', '[data-toggle=\"lightbox\"]', function(e) {\r\n\t\te.preventDefault();\r\n\t\t$(this).ekkoLightbox();\r\n\t});\r\n\r\n\tconst $el = {\r\n\t\tsectionInput: $('#section-input'),\r\n\t\tsectionResult: $('#section-result'),\r\n\t\tdropzone: $('#dropzone'),\r\n\t\ttimezone: $('#timezone'),\r\n\t\tdisplay: $('[name=\"display_setting\"]'),\r\n\t\ttbl: $('#table'),\r\n\t};\r\n\tvar $tbl,\r\n\t\ttimezone = 7,\r\n\t\tdisplay = 0,\r\n\t\temployees;\r\n\r\n\t$el.dropzone\r\n\t.on('click', function(e) { $('#input-files').trigger('click') })\r\n\t.on('drag dragstart dragend dragover dragenter dragleave drop', function(e) { e.preventDefault(); e.stopPropagation(); })\r\n\t.on('dragover dragenter', function() { $el.dropzone.addClass('dragover') })\r\n\t.on('dragleave dragend drop', function() { $el.dropzone.removeClass('dragover') })\r\n\t.on('drop', function(e) { readFile(e.originalEvent.dataTransfer.files) });\r\n\r\n\t$el.display.change(function() {\r\n\t\tdisplay = Number($(this).val());\r\n\t\t$el.tbl.toggleClass('td3-d-none td6-d-none', display === 0).toggleClass('td4-d-none td5-d-none', display === 1);\r\n\t\t$tbl.draw();\r\n\t});\r\n\r\n\t$('#input-files').change(function(e) { readFile(e.target.files) });\r\n\r\n\t$('#btn-reset').click(function() {\r\n\t\t$('.tooltip').tooltip('hide');\r\n\t\t$el.sectionResult.hide();\r\n\t\t$el.sectionInput.fadeIn();\r\n\t});\r\n\r\n\tconst readFile = files => {\r\n\r\n\t\tlet i = 0,\r\n\t\t\tn = files.length,\r\n\t\t\tnValid = 0,\r\n\t\t\tnInvalid = 0,\r\n\t\t\tnFailed = 0,\r\n\t\t\tdata = [];\r\n\r\n\t\tconst checkIfDone = () => {\r\n\t\t\tif (n === i) {\r\n\t\t\t\tif (nValid) {\r\n\t\t\t\t\tutils.notif(nValid+' file berhasil diproses', 'success');\r\n\t\t\t\t\tgenerateResult(data);\r\n\t\t\t\t}\r\n\t\t\t\tif (nInvalid) utils.notif((nValid ? nInvalid+' file' : 'File')+' tidak valid', 'danger');\r\n\t\t\t\tif (nFailed) utils.notif(nFailed+' file gagal terbaca', 'warning');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tArray.from(files).forEach(file => {\r\n\t\t\tlet ext = file.name.substr(file.name.lastIndexOf('.')+1).toLowerCase();\r\n\t\t\tif (ext === 'csv') {\r\n\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t\treader.onload = function(e) {\r\n\t\t\t\t\tlet text = e.target.result.replace(/\\t/g, ',');\r\n\t\t\t\t\tif (text.replace(/\\\"/g, '').startsWith('Responder Name,Group Name,Responder Location Latitude,Responder Location Longitude')) {\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tfilename: file.name,\r\n\t\t\t\t\t\t\tdata: $.csv.toObjects(text.replace(/\\,\\=\\\"20/g, ',\"20')),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ti++; nValid++; checkIfDone();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse { i++; nInvalid++; checkIfDone(); }\r\n\t\t\t\t}\r\n\t\t\t\treader.onerror = function() { i++; nFailed++; checkIfDone(); }\r\n\t\t\t}\r\n\t\t\telse { i++; nInvalid++; }\r\n\t\t});\r\n\r\n\t\tcheckIfDone();\r\n\t}\r\n\r\n\tconst generateResult = data => {\r\n\r\n\t\tconsole.info(data);\r\n\r\n\t\tconst colorTime = (m, n) => `<span class=\"text-${n <= 73000 || n >= (m.format('e') === '4' ? 163000 : 160000) ? 'green' : 'danger'}\">${m.format('HH:mm:ss')}</span>`;\r\n\r\n\t\t$el.timezone.html($('#select-timezone :selected').text());\r\n\t\ttimezone = Number($('#select-timezone').val());\r\n\r\n\t\tlet merged = []; employees = [];\r\n\r\n\t\tdata.forEach(a => {\r\n\t\t\ta.data.forEach(b => {\r\n\r\n\t\t\t\tlet m = moment(b['ResponseTime (UTC)'].substr(0,19)).add(timezone, 'hours'),\r\n\t\t\t\t\tday = m.format('dddd,D MMMM YYYY').split(','),\r\n\t\t\t\t\ttime = [m.format('HH:mm:ss'), Number(m.format('HHmmss'))];\r\n\r\n\t\t\t\tif (!employees.includes(b['Responder Name'])) employees.push(b['Responder Name']);\r\n\r\n\t\t\t\tlet id_employee = employees.findIndex(c => c === b['Responder Name'])+1,\r\n\t\t\t\t\tid_employee_d = id_employee + m.format('-YYYYMMDD'),\r\n\t\t\t\t\tid_employee_t = id_employee + m.format('-YYYYMMDD-HHmmss');\r\n\r\n\t\t\t\tmerged.push({\r\n\t\t\t\t\t...b,\r\n\t\t\t\t\tm,\r\n\t\t\t\t\tday,\r\n\t\t\t\t\ttime,\r\n\t\t\t\t\tdt_day: m.format('[<span class=\"d-none\">]YYYYMMDD[</span>]dddd, D MMMM YYYY'),\r\n\t\t\t\t\tdt_time: colorTime(m, time[1]),\r\n\t\t\t\t\tid_employee,\r\n\t\t\t\t\tid_employee_d,\r\n\t\t\t\t\tid_employee_t,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// if (DEV) console.table(merged.map(a => ({ day: a.day[1], time: a.time[0], name: a['Responder Name'] })));\r\n\r\n\t\tmerged.forEach(a => {\r\n\t\t\tlet allTime = merged.filter(b => b.id_employee_d === a.id_employee_d).sort((a,b) => a.time[1]>b.time[1] ? 1 : -1),\r\n\t\t\t\tn = allTime.length,\r\n\t\t\t\tthisTimeIndex = allTime.findIndex(b => b.time[0] === a.time[0]);\r\n\t\t\tif (thisTimeIndex === 0) {\r\n\t\t\t\tif (n === 1) {\r\n\t\t\t\t\tif (a.time[1] < 120000) {\r\n\t\t\t\t\t\ta.range_time = [a.time[0], '-'];\r\n\t\t\t\t\t\ta.range_coordinate = [a['Responder Location Latitude']+', '+a['Responder Location Longitude'], '-'];\r\n\t\t\t\t\t\ta.range_note = [a.NotesQuestionTitle, '-'];\r\n\t\t\t\t\t\ta.range_photo = [a.PhotoQuestionTitle, '-'];\r\n\t\t\t\t\t\ta.dt_range_time = [a.dt_time, '<span class=\"text-gray\">-</span>'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ta.range_time = ['-', a.time[0]];\r\n\t\t\t\t\t\ta.range_coordinate = ['-', a['Responder Location Latitude']+', '+a['Responder Location Longitude']];\r\n\t\t\t\t\t\ta.range_note = ['-', a.NotesQuestionTitle];\r\n\t\t\t\t\t\ta.range_photo = ['-', a.PhotoQuestionTitle];\r\n\t\t\t\t\t\ta.dt_range_time = ['<span class=\"text-gray\">-</span>', a.dt_time];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet b = allTime[n-1];\r\n\t\t\t\t\ta.range_time = [a.time[0], b.time[0]];\r\n\t\t\t\t\ta.range_coordinate = [a['Responder Location Latitude']+', '+a['Responder Location Longitude'], b['Responder Location Latitude']+', '+b['Responder Location Longitude']];\r\n\t\t\t\t\ta.range_note = [a.NotesQuestionTitle, b.NotesQuestionTitle];\r\n\t\t\t\t\ta.range_photo = [a.PhotoQuestionTitle, b.PhotoQuestionTitle];\r\n\t\t\t\t\ta.dt_range_time = [a.dt_time, b.dt_time];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$tbl.clear().rows.add(merged).draw();\r\n\t\t$el.tblFilter.html(\r\n\t\t\t'<option value=\"\">Semua Pegawai</option><option style=\"border-bottom: 1px solid #eee; font-size: 0; padding: 6px 0 0; margin-bottom: 6px;\" disabled></option>'\r\n\t\t\t+ employees.map((a,i) => [a, `<option value=\"${i+1}\">${a}</option>`]).sort((a,b) => a[0]>b[0] ? 1 : -1).map(a => a[1]).join('')\r\n\t\t).trigger('change').selectpicker('refresh');\r\n\r\n\t\t$('#display_setting1').click();\r\n\t\t$el.sectionInput.hide();\r\n\t\t$el.sectionResult.fadeIn();\r\n\t}\r\n\r\n\t$tbl = $el.tbl.DataTable({\r\n\t\tdata: [],\r\n\t\tcolumns: [{\r\n\t\t\tclassName: 'fit',\r\n\t\t\ttitle: 'Hari, Tanggal',\r\n\t\t\tdata: 'dt_day',\r\n\t\t},{\r\n\t\t\ttitle: 'Nama',\r\n\t\t\tdata: null,\r\n\t\t\trender: a => `<span class=\"d-none\">[id=${a.id_employee}]</span>${a['Responder Name']}`,\r\n\t\t},{\r\n\t\t\ttitle: 'Waktu',\r\n\t\t\tdata: 'dt_time',\r\n\t\t},{\r\n\t\t\ttitle: 'Waktu Mulai',\r\n\t\t\tdata: null,\r\n\t\t\trender: ({ dt_range_time }) => dt_range_time ? dt_range_time[0] : '',\r\n\t\t},{\r\n\t\t\ttitle: 'Waktu Berakhir',\r\n\t\t\tdata: null,\r\n\t\t\trender: ({ dt_range_time }) => dt_range_time ? dt_range_time[1] : '',\r\n\t\t},{\r\n\t\t\ttitle: 'Catatan',\r\n\t\t\tdata: 'NotesQuestionTitle',\r\n\t\t// },{\r\n\t\t// \tclassName: 'fit pr-2',\r\n\t\t// \ttitle: '',\r\n\t\t// \tdata: null,\r\n\t\t// \tsearchable: false,\r\n\t\t// \tsortable: false,\r\n\t\t// \trender: () => `<i class=\"fas fa-info-circle fa-fw py-1 cur-p fz-16 text-primary\" title=\"Detail\" onclick=\"utils.notif('Coming soon...', 'wait')\"></i>`,\r\n\t\t}],\r\n\t});\r\n\t$('#table_filter').html('<div class=\"d-inline-flex align-items-center\"><div class=\"mr-2\"><i class=\"fas fa-user\"></i></div><div><select id=\"table-filter-employee\" class=\"selectpicker\" data-style=\"btn-light btn-sm\"></select></div></div>');\r\n\t$el.tblFilter = $('#table-filter-employee').change(function() { $tbl.draw() });\r\n\r\n\t$.fn.dataTable.ext.search.push(function(settings, data, dataIndex) {\r\n\t\treturn ( !$el.tblFilter.val() || data[1].includes(`[id=${$el.tblFilter.val()}]`) ) && ( display || data[3] );\r\n\t});\r\n\r\n\tconst exportExcel = sheets => {\r\n\t\tlet wb = XLSX.utils.book_new();\r\n\t\tsheets.forEach(a => { XLSX.utils.book_append_sheet(wb, XLSX.utils.aoa_to_sheet(a.data), a.name) });\r\n\t\tXLSX.writeFile(wb, `Presensi Kaizala (${$('#select-timezone :selected').text()}) - ${moment.utc().add(timezone, 'hours').format('YYYYMMDD-HHmmss')}.xlsx`);\r\n\t}\r\n\r\n\t$('#btn-export').click(function() {\r\n\r\n\t\tlet rawdata = $tbl.rows().data().toArray(),\r\n\t\t\theader,\r\n\t\t\tdata,\r\n\t\t\tdataByEmployee = [];\r\n\r\n\t\tif (display) {\r\n\t\t\theader = ['Hari', 'Tanggal', 'Nama', 'Waktu', 'Koordinat', 'Catatan', 'Foto'];\r\n\t\t\tdata = rawdata.map(a => [\r\n\t\t\t\ta.day[0],\r\n\t\t\t\ta.day[1],\r\n\t\t\t\ta['Responder Name'],\r\n\t\t\t\ta.time,\r\n\t\t\t\ta['Responder Location Latitude']+', '+a['Responder Location Longitude'],\r\n\t\t\t\ta.NotesQuestionTitle,\r\n\t\t\t\ta.PhotoQuestionTitle,\r\n\t\t\t]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\theader = ['Hari', 'Tanggal', 'Nama', 'Waktu Mulai', 'Waktu Berakhir', 'Koordinat Waktu Mulai', 'Koordinat Waktu Berakhir', 'Catatan Waktu Mulai', 'Catatan Waktu Berakhir', 'Foto Waktu Mulai', 'Foto Waktu Berakhir'];\r\n\t\t\tdata = rawdata.filter(a => a.range_time).map(a => [\r\n\t\t\t\ta.day[0],\r\n\t\t\t\ta.day[1],\r\n\t\t\t\ta['Responder Name'],\r\n\t\t\t\ta.range_time[0],\r\n\t\t\t\ta.range_time[1],\r\n\t\t\t\ta.range_coordinate[0],\r\n\t\t\t\ta.range_coordinate[1],\r\n\t\t\t\ta.range_note[0],\r\n\t\t\t\ta.range_note[1],\r\n\t\t\t\ta.range_photo[0],\r\n\t\t\t\ta.range_photo[1],\r\n\t\t\t]);\r\n\t\t}\r\n\r\n\t\temployees.sort().forEach(name => {\r\n\t\t\tdataByEmployee.push({ name, data: [header].concat(data.filter(a => a[2] === name)) });\r\n\t\t});\r\n\r\n\t\tlet sheets = [{ name: 'Semua Pegawai', data: [header].concat(data) }].concat(dataByEmployee);\r\n\t\texportExcel(sheets);\r\n\r\n\t});\r\n\r\n});\r\n"],"sourceRoot":"/source/"}