{"version":3,"sources":["utilities.js","libraries.js","main.js"],"names":["utils","$modal","root","$","dialog","title","btn","closeBtn","body","footer","data","action","show","shown","hidden","loading","a","arguments","length","undefined","unsetError","html","prop","error","unsetLoadingState","hide","concat","slideDown","modal","_ref","_ref$title","_ref$btnLabel","btnLabel","_ref$btnClass","btnClass","_ref$btnDisabled","btnDisabled","_ref$btnCloseLabel","btnCloseLabel","_ref$btnCloseClass","btnCloseClass","_ref$data","_ref$dialogClass","dialogClass","_ref$backdrop","backdrop","_ref$action","_ref$show","_ref$shown","_ref$hidden","onclick","attr","addClass","_config","trigger","on","e","tooltip","fn","selectpicker","find","scrollbar","notif","message","type","close","settings","options","notifyClose","icon","notify","_objectSpread","getSlug","text","toLowerCase","replace","getModalData","doModalAction","modalLoading","modalError","dbg","c","DEV","console","info","log","split","selector","notifyDefaults","placement","from","animate","enter","exit","extend","dataTable","defaults","dom","language","decimal","thousands","lengthMenu","search","infoFiltered","infoEmpty","paginate","previous","next","zeroRecords","emptyTable","pageLength","$el","sectionInput","sectionResult","dropzone","timezone","display","tbl","Number","this","val","toggleClass","$tbl","draw","fadeIn","readFile","files","i","nValid","nInvalid","nFailed","checkIfDone","n","generateResult","Array","forEach","file","name","substr","lastIndexOf","reader","FileReader","readAsText","onload","target","result","startsWith","push","filename","csv","toObjects","onerror","merged","employees","m","moment","b","add","time","format","includes","id_employee","findIndex","id_employee_d","id_employee_t","day","dt_day","dt_time","colorTime","allTime","range_time","range_note","NotesQuestionTitle","range_photo","PhotoQuestionTitle","dt_range_time","range_coordinate","clear","rows","tblFilter","map","sort","join","click","className","sheets","XLSX","book_append_sheet","wb","aoa_to_sheet","writeFile","utc","header","dataByEmployee","filter","exportExcel"],"mappings":"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","file":"main.js","sourcesContent":["const utils = (function() {\r\n\r\n\tlet $modal = {\r\n\t\troot: $('#modal'),\r\n\t\tdialog: $('#modal-dialog'),\r\n\t\ttitle: $('#modal-title'),\r\n\t\tbtn: '',\r\n\t\tcloseBtn: $('#modal-title + .close'),\r\n\t\tbody: $('#modal-body'),\r\n\t\tfooter: $('#modal-footer'),\r\n\t\tdata: {},\r\n\t\taction: () => {},\r\n\t\tshow: () => {},\r\n\t\tshown: () => {},\r\n\t\thidden: () => {},\r\n\t\tloading: (a='<i class=\"fas fa-sync fa-spin mr-2\"></i>Memproses...', unsetError=true) => {\r\n\t\t\tif (a === false) {\r\n\t\t\t\t$('#modal-btn').html($modal.btn).prop('disabled', false);\r\n\t\t\t\t$('[data-dismiss=\"modal\"]').prop('disabled', false);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$('#modal-btn').html(a).prop('disabled', true);\r\n\t\t\t\t$('[data-dismiss=\"modal\"]').prop('disabled', true);\r\n\t\t\t\tif (unsetError) $modal.error(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\terror: (a=false, unsetLoadingState=true) => {\r\n\t\t\tif (a === false) $('#modal-error').hide();\r\n\t\t\telse {\r\n\t\t\t\t$('#modal-error').html(`<div class=\"px-3 py-2\"><i class=\"fas fa-exclamation-triangle mr-2\"></i>${a}</div>`).slideDown();\r\n\t\t\t\tif (unsetLoadingState) $modal.loading(false);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\tconst modal = ({ title='', body, btnLabel='Ok', btnClass='btn-primary', btnDisabled=false, btnCloseLabel='Batal', btnCloseClass='btn-default', data={}, dialogClass='', backdrop=true, action=null, show=null, shown=null, hidden=null }) => {\r\n\r\n\t\t$modal.data = data;\r\n\t\t$modal.btn = btnLabel;\r\n\t\t$modal.action = typeof action === 'function' ? action : (() => {});\r\n\t\t$modal.show = typeof show === 'function' ? show : (() => {});\r\n\t\t$modal.shown = typeof shown === 'function' ? shown : (() => {});\r\n\t\t$modal.hidden = typeof hidden === 'function' ? hidden : (() => {});\r\n\r\n\t\tlet onclick = 'data-dismiss=\"modal\"';\r\n\t\tif (typeof action === 'string') onclick = `onclick=\"${action}\"`;\r\n\t\telse if (typeof action === 'function') onclick = 'onclick=\"utils.doModalAction()\"';\r\n\r\n\t\t$modal.dialog.attr('class', 'modal-dialog').addClass(dialogClass);\r\n\t\t$modal.title.html(title);\r\n\t\t$modal.body.html(body);\r\n\t\t$modal.footer.html(`\r\n\t\t\t<button type=\"button\" class=\"btn ${btnCloseClass}\" data-dismiss=\"modal\">${btnCloseLabel}</button>\r\n\t\t\t<button type=\"button\" id=\"modal-btn\" ${onclick} class=\"btn ${btnClass}\" ${btnDisabled ? 'disabled' : ''}>${btnLabel}</button>\r\n\t\t`);\r\n\r\n\t\t$modal.root.data('bs.modal')._config.backdrop = backdrop;\r\n\r\n\t\t$modal.error();\r\n\r\n\t\treturn $modal.root.modal('show').trigger('show.bs.modal');\r\n\t};\r\n\r\n\t$modal.root\r\n\t.modal('hide')\r\n\t.on('show.bs.modal', e => {\r\n\t\t$modal.closeBtn.prop('disabled', false);\r\n\t\t$('[data-toggle=\"tooltip\"]').tooltip('hide');\r\n\t\tif ($.fn.selectpicker) $modal.root.find('.selectpicker').selectpicker('render');\r\n\t\tif ($.fn.scrollbar) $modal.root.find('.scrollbar-outer').scrollbar();\r\n\t\t$modal.show();\r\n\t})\r\n\t.on('shown.bs.modal', e => {\r\n\t\t$modal.shown();\r\n\t})\r\n\t.on('hidden.bs.modal', e => {\r\n\t\t$modal.hidden();\r\n\t});\r\n\r\n\tconst notif = (message, type='info', close=false, settings, options) => {\r\n\t\tif (close) $.notifyClose();\r\n\t\tlet icon = 'icon-info';\r\n\t\tif (type === 'wait') { icon = 'icon-hourglass'; type = 'info'; }\r\n\t\tif (type === 'success') { icon = 'icon-check'; }\r\n\t\tif (type === 'danger' || type === 'warning') { icon = 'icon-exclamation'; }\r\n\t\t$.notify({ message, icon, ...options }, { type, ...settings });\r\n\t}\r\n\r\n\tconst getSlug = text=> text.toLowerCase().replace(/[^\\w ]+/g,'').replace(/ +/g,'-');\r\n\r\n\treturn {\r\n\t\tmodal,\r\n\t\tgetModalData: () => $modal.data,\r\n\t\tdoModalAction: () => $modal.action(),\r\n\t\tmodalLoading: $modal.loading,\r\n\t\tmodalError: $modal.error,\r\n\t\tnotif,\r\n\t\tgetSlug,\r\n\t}\r\n\r\n})();\r\n\r\n\r\n\r\nconst dbg = (a='!', c=0) => {\r\n\tif (typeof DEV !== 'undefined') {\r\n\t\tif (DEV) console.info('%c'+a, `color: ${typeof c==='number'? ['#00ff7f', '#6495ed', '#ff0', '#fa8072', '#ffa500', '#f00'][c] : c}`);\r\n\t}\r\n}\r\n\r\n\r\n\r\n$(()=>{\r\n\r\n\tconsole.log('Â© Muhammad Afifudin, 2020');\r\n\tconsole.log('%cVersion: '+$('script[src*=\"assets/js\"]').prop('src').split('?v=')[1], 'color: #6495ed');\r\n\r\n\t$('body').tooltip({ selector: '[data-toggle=\"tooltip\"]', html: true });\r\n\r\n});\r\n","$.notifyDefaults({\r\n\tplacement: { from: 'bottom' },\r\n\tanimate: { enter: 'animated fadeInUp', exit: 'animated fadeOutDown' },\r\n});\r\n\r\n$.extend(true, $.fn.dataTable.defaults, {\r\n\tdom: \"<'row justify-content-center'<'col-sm-auto'l><'col-sm'f>>r<'table-responsive't><'row justify-content-center align-items-center'<'col-sm-auto'i><'col-sm'p>>\",\r\n\tlanguage: {\r\n\t\tdecimal: ',',\r\n\t\tthousands: '.',\r\n\t\tlengthMenu: 'Menampilkan &nbsp;_MENU_&nbsp; data',\r\n\t\tsearch: 'Cari',\r\n\t\tinfo: 'Halaman _PAGE_ dari _PAGES_',\r\n\t\tinfoFiltered: '',\r\n\t\tinfoEmpty: 'Menampilkan 0 hasil',\r\n\t\tpaginate: { previous: '<i class=\"fas fa-chevron-left\"></i>', next: '<i class=\"fas fa-chevron-right\"></i>' },\r\n\t\tzeroRecords: 'Tidak ada hasil',\r\n\t\temptyTable: 'Tidak ada data',\r\n\t},\r\n\tpageLength: 50,\r\n\tlengthMenu: [10, 25, 50, 100, 250, 500],\r\n});\r\n","$(()=>{\r\n\r\n\tconst $el = {\r\n\t\tsectionInput: $('#section-input'),\r\n\t\tsectionResult: $('#section-result'),\r\n\t\tdropzone: $('#dropzone'),\r\n\t\ttimezone: $('#timezone'),\r\n\t\tdisplay: $('[name=\"display_setting\"]'),\r\n\t\ttbl: $('#table'),\r\n\t};\r\n\tvar $tbl,\r\n\t\ttimezone = 7,\r\n\t\tdisplay = 0,\r\n\t\temployees;\r\n\r\n\t$el.dropzone\r\n\t.on('click', function(e) { $('#input-files').trigger('click') })\r\n\t.on('drag dragstart dragend dragover dragenter dragleave drop', function(e) { e.preventDefault(); e.stopPropagation(); })\r\n\t.on('dragover dragenter', function() { $el.dropzone.addClass('dragover') })\r\n\t.on('dragleave dragend drop', function() { $el.dropzone.removeClass('dragover') })\r\n\t.on('drop', function(e) { readFile(e.originalEvent.dataTransfer.files) });\r\n\r\n\t$el.display.change(function() {\r\n\t\tdisplay = Number($(this).val());\r\n\t\t$el.tbl.toggleClass('td3-d-none td6-d-none', display === 0).toggleClass('td4-d-none td5-d-none', display === 1);\r\n\t\t$tbl.draw();\r\n\t});\r\n\r\n\t$('#input-files').change(function(e) { readFile(e.target.files) });\r\n\r\n\t$('#btn-reset').click(function() {\r\n\t\t$('.tooltip').tooltip('hide');\r\n\t\t$el.sectionResult.hide();\r\n\t\t$el.sectionInput.fadeIn();\r\n\t});\r\n\r\n\tconst readFile = files => {\r\n\r\n\t\tlet i = 0,\r\n\t\t\tn = files.length,\r\n\t\t\tnValid = 0,\r\n\t\t\tnInvalid = 0,\r\n\t\t\tnFailed = 0,\r\n\t\t\tdata = [];\r\n\r\n\t\tconst checkIfDone = () => {\r\n\t\t\tif (n === i) {\r\n\t\t\t\tif (nValid) {\r\n\t\t\t\t\tutils.notif(nValid+' file berhasil diproses', 'success');\r\n\t\t\t\t\tgenerateResult(data);\r\n\t\t\t\t}\r\n\t\t\t\tif (nInvalid) utils.notif((nValid ? nInvalid+' file' : 'File')+' tidak valid', 'danger');\r\n\t\t\t\tif (nFailed) utils.notif(nFailed+' file gagal terbaca', 'warning');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tArray.from(files).forEach(file => {\r\n\t\t\tlet ext = file.name.substr(file.name.lastIndexOf('.')+1).toLowerCase();\r\n\t\t\tif (ext === 'csv') {\r\n\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t\treader.onload = function(e) {\r\n\t\t\t\t\tlet text = e.target.result.replace(/\\t/g, ',');\r\n\t\t\t\t\tif (text.replace(/\\\"/g, '').startsWith('Responder Name,Group Name,Responder Location Latitude,Responder Location Longitude')) {\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\tfilename: file.name,\r\n\t\t\t\t\t\t\tdata: $.csv.toObjects(text.replace(/\\,\\=\\\"20/g, ',\"20')),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ti++; nValid++; checkIfDone();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse { i++; nInvalid++; checkIfDone(); }\r\n\t\t\t\t}\r\n\t\t\t\treader.onerror = function() { i++; nFailed++; checkIfDone(); }\r\n\t\t\t}\r\n\t\t\telse { i++; nInvalid++; }\r\n\t\t});\r\n\r\n\t\tcheckIfDone();\r\n\t}\r\n\r\n\tconst generateResult = data => {\r\n\r\n\t\tconsole.info(data);\r\n\r\n\t\tconst colorTime = (m, n) => `<span class=\"text-${n <= 73000 || n >= (m.format('e') === '4' ? 163000 : 160000) ? 'green' : 'danger'}\">${m.format('HH:mm:ss')}</span>`;\r\n\r\n\t\t$el.timezone.html($('#select-timezone :selected').text());\r\n\t\ttimezone = Number($('#select-timezone').val());\r\n\r\n\t\tlet merged = []; employees = [];\r\n\r\n\t\tdata.forEach(a => {\r\n\t\t\ta.data.forEach(b => {\r\n\r\n\t\t\t\tlet m = moment(b['ResponseTime (UTC)'].substr(0,19)).add(timezone, 'hours'),\r\n\t\t\t\t\tday = m.format('dddd,D MMMM YYYY').split(','),\r\n\t\t\t\t\ttime = [m.format('HH:mm:ss'), Number(m.format('HHmmss'))];\r\n\r\n\t\t\t\tif (!employees.includes(b['Responder Name'])) employees.push(b['Responder Name']);\r\n\r\n\t\t\t\tlet id_employee = employees.findIndex(c => c === b['Responder Name'])+1,\r\n\t\t\t\t\tid_employee_d = id_employee + m.format('-YYYYMMDD'),\r\n\t\t\t\t\tid_employee_t = id_employee + m.format('-YYYYMMDD-HHmmss');\r\n\r\n\t\t\t\tmerged.push({\r\n\t\t\t\t\t...b,\r\n\t\t\t\t\tm,\r\n\t\t\t\t\tday,\r\n\t\t\t\t\ttime,\r\n\t\t\t\t\tdt_day: m.format('[<span class=\"d-none\">]YYYYMMDD[</span>]dddd, D MMMM YYYY'),\r\n\t\t\t\t\tdt_time: colorTime(m, time[1]),\r\n\t\t\t\t\tid_employee,\r\n\t\t\t\t\tid_employee_d,\r\n\t\t\t\t\tid_employee_t,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tmerged.forEach(a => {\r\n\t\t\tlet allTime = merged.filter(b => b.id_employee_d === a.id_employee_d),\r\n\t\t\t\tn = allTime.length,\r\n\t\t\t\tthisTimeIndex = allTime.findIndex(b => b.time[0] === a.time[0]);\r\n\t\t\tif (thisTimeIndex === 0) {\r\n\t\t\t\tif (n === 1) {\r\n\t\t\t\t\tif (a.time[1] < 120000) {\r\n\t\t\t\t\t\ta.range_time = [a.time[0], '-'];\r\n\t\t\t\t\t\ta.range_coordinate = [a['Responder Location Latitude']+', '+a['Responder Location Longitude'], '-'];\r\n\t\t\t\t\t\ta.range_note = [a.NotesQuestionTitle, '-'];\r\n\t\t\t\t\t\ta.range_photo = [a.PhotoQuestionTitle, '-'];\r\n\t\t\t\t\t\ta.dt_range_time = [a.dt_time, '<span class=\"text-gray\">-</span>'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ta.range_time = ['-', a.time[0]];\r\n\t\t\t\t\t\ta.range_coordinate = ['-', a['Responder Location Latitude']+', '+a['Responder Location Longitude']];\r\n\t\t\t\t\t\ta.range_note = ['-', a.NotesQuestionTitle];\r\n\t\t\t\t\t\ta.range_photo = ['-', a.PhotoQuestionTitle];\r\n\t\t\t\t\t\ta.dt_range_time = ['<span class=\"text-gray\">-</span>', a.dt_time];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet b = allTime[n-1];\r\n\t\t\t\t\ta.range_time = [a.time[0], b.time[0]];\r\n\t\t\t\t\ta.range_coordinate = [a['Responder Location Latitude']+', '+a['Responder Location Longitude'], b['Responder Location Latitude']+', '+b['Responder Location Longitude']];\r\n\t\t\t\t\ta.range_note = [a.NotesQuestionTitle, b.NotesQuestionTitle];\r\n\t\t\t\t\ta.range_photo = [a.PhotoQuestionTitle, b.PhotoQuestionTitle];\r\n\t\t\t\t\ta.dt_range_time = [a.dt_time, b.dt_time];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$tbl.clear().rows.add(merged).draw();\r\n\t\t$el.tblFilter.html(\r\n\t\t\t'<option value=\"\">Semua Pegawai</option><option style=\"border-bottom: 1px solid #eee; font-size: 0; padding: 6px 0 0; margin-bottom: 6px;\" disabled></option>'\r\n\t\t\t+ employees.map((a,i) => [a, `<option value=\"${i+1}\">${a}</option>`]).sort((a,b) => a[0]>b[0] ? 1 : -1).map(a => a[1]).join('')\r\n\t\t).trigger('change').selectpicker('refresh');\r\n\r\n\t\t$('#display_setting1').click();\r\n\t\t$el.sectionInput.hide();\r\n\t\t$el.sectionResult.fadeIn();\r\n\t}\r\n\r\n\t$tbl = $el.tbl.DataTable({\r\n\t\tdata: [],\r\n\t\tcolumns: [{\r\n\t\t\tclassName: 'fit',\r\n\t\t\ttitle: 'Hari, Tanggal',\r\n\t\t\tdata: 'dt_day',\r\n\t\t},{\r\n\t\t\ttitle: 'Nama',\r\n\t\t\tdata: null,\r\n\t\t\trender: a => `<span class=\"d-none\">[id=${a.id_employee}]</span>${a['Responder Name']}`,\r\n\t\t},{\r\n\t\t\ttitle: 'Waktu',\r\n\t\t\tdata: 'dt_time',\r\n\t\t},{\r\n\t\t\ttitle: 'Waktu Mulai',\r\n\t\t\tdata: null,\r\n\t\t\trender: ({ dt_range_time }) => dt_range_time ? dt_range_time[0] : '',\r\n\t\t},{\r\n\t\t\ttitle: 'Waktu Berakhir',\r\n\t\t\tdata: null,\r\n\t\t\trender: ({ dt_range_time }) => dt_range_time ? dt_range_time[1] : '',\r\n\t\t},{\r\n\t\t\ttitle: 'Catatan',\r\n\t\t\tdata: 'NotesQuestionTitle',\r\n\t\t// },{\r\n\t\t// \tclassName: 'fit pr-2',\r\n\t\t// \ttitle: '',\r\n\t\t// \tdata: null,\r\n\t\t// \tsearchable: false,\r\n\t\t// \tsortable: false,\r\n\t\t// \trender: () => `<i class=\"fas fa-info-circle fa-fw py-1 cur-p fz-16 text-primary\" title=\"Detail\" onclick=\"utils.notif('Coming soon...', 'wait')\"></i>`,\r\n\t\t}],\r\n\t});\r\n\t$('#table_filter').html('<div class=\"d-inline-flex align-items-center\"><div class=\"mr-2\"><i class=\"fas fa-user\"></i></div><div><select id=\"table-filter-employee\" class=\"selectpicker\" data-style=\"btn-light btn-sm\"></select></div></div>');\r\n\t$el.tblFilter = $('#table-filter-employee').change(function() { $tbl.draw() });\r\n\r\n\t$.fn.dataTable.ext.search.push(function(settings, data, dataIndex) {\r\n\t\treturn ( !$el.tblFilter.val() || data[1].includes(`[id=${$el.tblFilter.val()}]`) ) && ( display || data[3] );\r\n\t});\r\n\r\n\tconst exportExcel = sheets => {\r\n\t\tlet wb = XLSX.utils.book_new();\r\n\t\tsheets.forEach(a => { XLSX.utils.book_append_sheet(wb, XLSX.utils.aoa_to_sheet(a.data), a.name) });\r\n\t\tXLSX.writeFile(wb, `Presensi Kaizala (${$('#select-timezone :selected').text()}) - ${moment.utc().add(timezone, 'hours').format('YYYYMMDD-HHmmss')}.xlsx`);\r\n\t}\r\n\r\n\t$('#btn-export').click(function() {\r\n\r\n\t\tlet rawdata = $tbl.rows().data().toArray(),\r\n\t\t\theader,\r\n\t\t\tdata,\r\n\t\t\tdataByEmployee = [];\r\n\r\n\t\tif (display) {\r\n\t\t\theader = ['Hari', 'Tanggal', 'Nama', 'Waktu', 'Koordinat', 'Catatan', 'Foto'];\r\n\t\t\tdata = rawdata.map(a => [\r\n\t\t\t\ta.day[0],\r\n\t\t\t\ta.day[1],\r\n\t\t\t\ta['Responder Name'],\r\n\t\t\t\ta.time,\r\n\t\t\t\ta['Responder Location Latitude']+', '+a['Responder Location Longitude'],\r\n\t\t\t\ta.NotesQuestionTitle,\r\n\t\t\t\ta.PhotoQuestionTitle,\r\n\t\t\t]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\theader = ['Hari', 'Tanggal', 'Nama', 'Waktu Mulai', 'Waktu Berakhir', 'Koordinat Waktu Mulai', 'Koordinat Waktu Berakhir', 'Catatan Waktu Mulai', 'Catatan Waktu Berakhir', 'Foto Waktu Mulai', 'Foto Waktu Berakhir'];\r\n\t\t\tdata = rawdata.filter(a => a.range_time).map(a => [\r\n\t\t\t\ta.day[0],\r\n\t\t\t\ta.day[1],\r\n\t\t\t\ta['Responder Name'],\r\n\t\t\t\ta.range_time[0],\r\n\t\t\t\ta.range_time[1],\r\n\t\t\t\ta.range_coordinate[0],\r\n\t\t\t\ta.range_coordinate[1],\r\n\t\t\t\ta.range_note[0],\r\n\t\t\t\ta.range_note[1],\r\n\t\t\t\ta.range_photo[0],\r\n\t\t\t\ta.range_photo[1],\r\n\t\t\t]);\r\n\t\t}\r\n\r\n\t\temployees.sort().forEach(name => {\r\n\t\t\tdataByEmployee.push({ name, data: [header].concat(data.filter(a => a[2] === name)) });\r\n\t\t});\r\n\r\n\t\tlet sheets = [{ name: 'Semua Pegawai', data: [header].concat(data) }].concat(dataByEmployee);\r\n\t\texportExcel(sheets);\r\n\r\n\t});\r\n\r\n});\r\n"],"sourceRoot":"/source/"}